# Generated by PNCconf at Wed Sep 18 20:56:15 2019
# Using LinuxCNC version:  UNAVAILABLE
# Änderungen an dieser Datei werden beim nächsten
# overwritten when you run PNCconf again

[EMC]
MACHINE = Red_Dragon
DEBUG = 1
VERSION = 1.1

[DISPLAY]
DISPLAY = probe_basic
#OPEN_FILE = ~/linuxcnc/nc_files/3D_Chips.ngc
# blank.ngc
CONFIG_FILE = custom_config.yml
HIDE_CURSOR = false
#FULLSCREEN = 1
# One of DEBUG, INFO, WARN, ERROR or CRITICAL
LOG_LEVEL = INFO
LOG_FILE = ~/linuxcnc/configs/RedDragon_machine/RedDragon.log
POSITION_OFFSET = RELATIVE
POSITION_FEEDBACK = ACTUAL
MAX_FEED_OVERRIDE = 3.000000
DEFAULT_SPINDLE_SPEED = 2000
MAX_SPINDLE_OVERRIDE = 2.000000
MIN_SPINDLE_OVERRIDE = 0.500000
INTRO_GRAPHIC = linuxcnc.gif
INTRO_TIME = 2
PROGRAM_PREFIX = ~/linuxcnc/nc_files
INCREMENTS = JOG 1mm .1mm  .01mm .001mm
DEFAULT_LINEAR_VELOCITY = 150.000000
MAX_LINEAR_VELOCITY = 280.000000
MIN_LINEAR_VELOCITY = 0.500000
DEFAULT_ANGULAR_VELOCITY = 12.000000
MAX_ANGULAR_VELOCITY = 180.000000
MIN_ANGULAR_VELOCITY = 1.666667
EDITOR = gedit
GEOMETRY = xyz

[VTK]
PROGRAM_BOUNDRY = true
PROGRAM_TICKS = False
PROGRAM_LABELS = true
MACHINE_BOUNDRY = False
MACHINE_TICKS = False
MACHINE_LABELS = false
GRID_LINES = True

[FILTER]
PROGRAM_EXTENSION = .png,.gif,.jpg Greyscale Depth Image
PROGRAM_EXTENSION = .py Python Script
png = image-to-gcode
gif = image-to-gcode
jpg = image-to-gcode
py = python

[PYTHON]
TOPLEVEL = ./python/toplevel.py
PATH_APPEND = ./python/
PATH_APPEND = ./python/python-stdglue/

[TASK]
TASK = milltask
CYCLE_TIME = 0.010

[RS274NGC]
RS274NGC_STARTUP_CODE = F10 S300 G21 G17 G40 G49 G54 G64 P0.001 G80 G90 G91.1 G92.1 G94 G97 G98
#RS274NGC_STARTUP_CODE = F10 S300 G21 G17 G40 G49 G54 G64 P0.001 G90 G91.1 G92.1 G94 G97 G98
# allows variables in G-Code (macros), syntax: #<_INI[section]vaiable>
# turn on all optional features except RETAIN_G43
FEATURES= 30
PARAMETER_FILE = param.var
SUBROUTINE_PATH = macros/
#BELOW ARE MY REMAPPED M CODES FOR TOOLCHANGES
# REMAP=G28 modalgroup=0 ngc=go_to_g28  # funktioniert einfach nicht???
# REMAP=M6  modalgroup=6 prolog=change_prolog ngc=toolchange epilog=change_epilog
REMAP= M6   modalgroup=6  prolog=change_prolog   ngc=tool_manual_change  epilog=change_epilog
#REMAP=M600  modalgroup=6 ngc=toolchange
REMAP=M10 modalgroup=6 argspec=p ngc=m10
REMAP=M11 modalgroup=6 argspec=p ngc=m11
REMAP=M12 modalgroup=6 argspec=p ngc=m12
REMAP=M13 modalgroup=6 ngc=m13
REMAP=M21 modalgroup=6 ngc=m21
REMAP=M22 modalgroup=6 ngc=m22
REMAP=M23 modalgroup=6 ngc=m23
REMAP=M24 modalgroup=6 ngc=m24
REMAP=M25 modalgroup=6 ngc=m25
REMAP=M26 modalgroup=6 ngc=m26
REMAP= M0 modalgroup=4 ngc=extend_m0
REMAP= M1 modalgroup=4 ngc=extend_m1

ON_ABORT_COMMAND= O <on_abort> call

[EMCMOT]
EMCMOT = motmod
COMM_TIMEOUT = 1.0
# SERVO_PERIOD: einzustellen anhand des Jitter
SERVO_PERIOD = 1200000 

[HMOT]
# **** This is for info only ****
# CARD0=hm2_5i24.0

[HAL]
HALUI = halui
HALFILE = hallib/RedDragon.hal
HALFILE = hallib/Ampel.hal
POSTGUI_HALFILE = hallib/postgui_call_list.hal
SHUTDOWN = hallib/shutdown.hal

[HALUI]
### zero the axis fom TsHW ###
MDI_COMMAND = G10 L20 P1 X0
MDI_COMMAND = G10 L20 P1 Y0
MDI_COMMAND = G10 L20 P1 Z0
###                       ####

[KINS]
JOINTS = 3
KINEMATICS = trivkins coordinates=XYZ

[TRAJ]
# Trajectory Planner see Doc page 414
COORDINATES =  XYZ
LINEAR_UNITS = mm
ANGULAR_UNITS = degree
DEFAULT_LINEAR_VELOCITY = 25.0
MAX_LINEAR_VELOCITY = 250.00		
# ^^mm/sec 250=15m/min

[EMCIO]
EMCIO = iov2
CYCLE_TIME = 0.100
TOOL_TABLE = tooltable.tbl
#TOOL_CHANGE_QUILL_UP = 1
#RANDOM_TOOLCHANGER = 1

#******************************************
[AXIS_X]
# Maximum velocity for this axis in machine units per second. 250=15m/min
MAX_VELOCITY = 50.0
MAX_ACCELERATION = 2000.0
MIN_LIMIT = -2.0
MAX_LIMIT = 670.0

[JOINT_0]
TYPE = LINEAR
HOME = 0.0
# G0 Schlepp-Fehler
FERROR = 1.0
# G1 Schlepp-Fehler
MIN_FERROR = 0.5
MAX_VELOCITY = 40.0
MAX_ACCELERATION = 1000.0
# The values below should be 25% larger than MAX_VELOCITY and MAX_ACCELERATION
# If using BACKLASH compensation STEPGEN_MAXACCEL should be 100% larger.
STEPGEN_MAXVEL = 80.00
STEPGEN_MAXACCEL = 2000.00
P = 1000.0
I = 0.0
D = 0.0
FF0 = 0.0
FF1 = 1.0
FF2 = 0.0
BIAS = 0.0
DEADBAND = 0.005
MAX_OUTPUT = 0.0
# ENCODER_SCALE = 1000.0
# these are in nanoseconds
DIRSETUP   = 3500
DIRHOLD    = 3500
STEPLEN    = 3000
STEPSPACE  = 500
# Schritte pro Um / +- Drehrichtung
STEP_SCALE = 2000.0
MIN_LIMIT = -3.0
MAX_LIMIT = 680.0
HOME_OFFSET = 0.000000
HOME_SEARCH_VEL = -10
HOME_LATCH_VEL = -0.10000
HOME_FINAL_VEL = 0.50000
HOME_USE_INDEX = NO
# Home_Sequence =-1 bedeutet das diese Axsen syncron zum Homing fahren. Ansonsten die Reihenfolge also aufsteigende Nummern vergeben.
HOME_SEQUENCE = 1
#******************************************

#******************************************
[AXIS_Y]
MAX_VELOCITY = 250.0
MAX_ACCELERATION = 2000.0
MIN_LIMIT = -0.01
MAX_LIMIT = 1060.0

[JOINT_1]
TYPE = LINEAR
HOME = 0.0
FERROR = 0.5
MIN_FERROR = 1.0
MAX_VELOCITY = 50.0
MAX_ACCELERATION = 2000.0
# The values below should be 25% larger than MAX_VELOCITY and MAX_ACCELERATION
# If using BACKLASH compensation STEPGEN_MAXACCEL should be 100% larger.
STEPGEN_MAXVEL = 320.00
STEPGEN_MAXACCEL = 2000
P = 1000.0
I = 0.0
D = 0.0
FF0 = 0.0
FF1 = 1.0
FF2 = 0.0
BIAS = 0.0
DEADBAND = 0.005
MAX_OUTPUT = 0.0
# these are in nanoseconds
DIRSETUP   = 250
DIRHOLD    = 125
STEPLEN    = 250
STEPSPACE  = 125
STEP_SCALE = -2000.0
MIN_LIMIT = -3.3
MAX_LIMIT = 1060.0
HOME_OFFSET = 0.000000
HOME_SEARCH_VEL = -5.000000
HOME_LATCH_VEL = 0.500000
HOME_FINAL_VEL = 0.500000
HOME_USE_INDEX = NO
# Home_Sequence =-1 bedeutet das diese Axsen syncron zum Homing fahren. Ansonsten die Reihenfolge also aufsteigende Nummern vergeben.
HOME_SEQUENCE = 2
#******************************************

#******************************************
[AXIS_Z]
MAX_VELOCITY = 25.0
MAX_ACCELERATION = 750.0
MIN_LIMIT = -280.0
MAX_LIMIT = 0.01

[JOINT_2]
TYPE = LINEAR
HOME = 0.0
FERROR = 10.0
MIN_FERROR = 1.0
MAX_VELOCITY = 25.0
MAX_ACCELERATION = 750.0
# The values below should be 25% larger than MAX_VELOCITY and MAX_ACCELERATION
# If using BACKLASH compensation STEPGEN_MAXACCEL should be 100% larger.
STEPGEN_MAXVEL = 31.25
STEPGEN_MAXACCEL = 937.50
P = 10000.0
I = 0.0
D = 0.0
FF0 = 0.0
FF1 = 1.0
FF2 = 0.0
BIAS = 0.0
DEADBAND = 0.001
MAX_OUTPUT = 0.0
# these are in nanoseconds
DIRSETUP   = 250
DIRHOLD    = 125
STEPLEN    = 250
STEPSPACE  = 125
STEP_SCALE = 1000.0
MIN_LIMIT = -280.0
MAX_LIMIT = 0.01
HOME_OFFSET = 0.000000
HOME_SEARCH_VEL = 1.000000
HOME_LATCH_VEL = -0.500000
HOME_FINAL_VEL = -0.500000
HOME_USE_INDEX = NO
HOME_SEQUENCE = 0
#******************************************

#********************
# Spindle 
#********************

[SPINDLE_0]
PWM_FREQ		= 5000
OUTPUT_SCALE	= 24000

# Part program interpreter section --------------------------------------------
[TOOLSENSOR]
X = 10
Y = 10
Z = 10
# abort change if no toolsensor contact after this probe distance
MAXPROBE= -10
PROBEFEED= 50

# this is not named TOOL_CHANGE_POSITION  on purpose - canon uses it and will
# interfere
[CHANGE_POSITION]
X = 10
Y = 20
Z = -10
Z-SAFE = -5

# motion.digital-in/out-NN pins
[PINS]
# motion.digital-out-00 #  ready to change tool, sperrluft an, open Clamp after 3 sec
CHANGE = 0
# motion.digital-out-01
PROBING = 1
# motion.digital-out-02
ENABLE = 2
# motion.digital-out-03
CLAMP = 3
# motion.digital-out-04
SEALINGAIR = 4

# motion.digital-in-00
CHANGED = 0
# motion.digital-in-01
REFTOOL = 1
# motion.digital-in-02 # tool in Spindle und gesichert S1+S4+S5 # P3-in-02
TOOL_SAFE_IN = 2
# motion.digital-in-03 # Spannzage geöffnet # p3-in-01
CLAMPSTATE =3
# motion.digital-in-04 # Kein Werkzeug # p3-in-04
NOTOOL =4


# motion.analog-out-00
TOOLNO = 0
# motion.analog-out-01
REFLEN = 1
# motion.analog-out-02
CURRLEN = 2

[DWELL]
# timeout the change after 10 sec.
ACK_SECS= 10
# time the clamp should be open and wait 
CLAMP_DELAY_T = 3
CLAMP_HOLD_T = 1.2
